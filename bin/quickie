#! /usr/bin/env node
'use strict';

// Provide a title to the process in `ps`
process.title = 'quickie';

const exit = require('exit');
const tasks = require('require-all')(__dirname + '/../lib/tasks');

if(!process.argv[2] || !(process.argv[2] in tasks)) {
  console.error("Please specify a valid command. Use `quickie help` for a list of valid commands.");
  exit(1);
} else {
  let task = tasks[process.argv[2]];
  let extra_args = process.argv.slice(3);

  if(task.handler.length > extra_args.length) {
    console.error("Insufficient arguments for specified command.");
    console.error("Do quickie help to see command specification.");
    exit(1);
  } else {
    task.handler.apply(this, extra_args.slice(0, task.handler.length))
  }
}
